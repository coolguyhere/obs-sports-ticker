<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sports Scores Ticker</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, Helvetica, sans-serif;
}

.ticker-wrap {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 80px;
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: center;
  overflow: hidden;
}

.ticker {
  white-space: nowrap;
  padding-left: 100%;
  font-size: 28px;
  color: white;
  opacity: 0;
}

.scroll {
  animation:
    fadeIn 1.5s ease forwards,
    scroll 70s linear forwards,
    fadeOut 1.5s ease forwards;
  animation-delay: 0s, 0s, 68.5s;
}

@keyframes scroll {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

.live {
  color: #00ff7f;
  font-weight: bold;
}

.separator {
  margin: 0 18px;
}
</style>
</head>

<body>
<div class="ticker-wrap">
  <div class="ticker" id="ticker">Loading today’s scores…</div>
</div>

<script>
const leagues = [
  { name: "NFL", url: "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard" },
  { name: "NBA", url: "https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard" },
  // { name: "MLB", url: "https://site.api.espn.com/apis/site/v2/sports/baseball/mlb/scoreboard" },
  { name: "NHL", url: "https://site.api.espn.com/apis/site/v2/sports/hockey/nhl/scoreboard" }
];

const PAUSE_BETWEEN_LOOPS = 3000; // 3 seconds

async function fetchScores() {
  const segments = [];

  for (const league of leagues) {
    try {
      const proxyUrl =
        "https://api.allorigins.win/raw?url=" +
        encodeURIComponent(league.url);

      const res = await fetch(proxyUrl);
      const data = await res.json();
      const events = data.events || [];

      events.forEach(event => {
        const comp = event.competitions[0];
        const away = comp.competitors.find(t => t.homeAway === "away");
        const home = comp.competitors.find(t => t.homeAway === "home");
        const status = comp.status.type;

        const isLive = status.state === "in";
        const statusText = isLive ? "LIVE" : status.shortDetail;

        segments.push(
          `<span class="${isLive ? 'live' : ''}">
            ${league.name}: ${away.team.abbreviation} ${away.score} – ${home.score} ${home.team.abbreviation}
            (${statusText})
          </span>`
        );
      });

    } catch (err) {
      console.error(err);
    }
  }

  startTicker(segments.length ? segments.join('<span class="separator">|</span>') : "No games today.");
}

function startTicker(content) {
  const ticker = document.getElementById("ticker");

  ticker.className = "ticker"; // reset
  ticker.innerHTML = content;

  // Force reflow to restart animation
  void ticker.offsetWidth;

  ticker.classList.add("scroll");

  // Restart after full cycle + pause
  setTimeout(fetchScores, 70000 + PAUSE_BETWEEN_LOOPS);
}

fetchScores();
</script>
</body>
</html>

