<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sports Scores Ticker</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, Helvetica, sans-serif;
}

.ticker-wrap {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 80px;
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: center;
  overflow: hidden;
}

.ticker {
  white-space: nowrap;
  padding-left: 100%;
  animation: scroll 45s linear infinite;
  font-size: 28px;
  color: white;
}

@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}
</style>
</head>

<body>
<div class="ticker-wrap">
  <div class="ticker" id="ticker">Loading today’s scores…</div>
</div>

<script>
const leagues = [
  { name: "NFL", url: "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard" },
  { name: "NBA", url: "https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard" },
  { name: "MLB", url: "https://site.api.espn.com/apis/site/v2/sports/baseball/mlb/scoreboard" },
  { name: "NHL", url: "https://site.api.espn.com/apis/site/v2/sports/hockey/nhl/scoreboard" }
];

async function fetchScores() {
  const segments = [];

  for (const league of leagues) {
    try {
      const proxyUrl =
        "https://api.allorigins.win/raw?url=" +
        encodeURIComponent(league.url);

      const res = await fetch(proxyUrl);
      const data = await res.json();

      const events = data.events || [];

      events.forEach(event => {
        const comp = event.competitions[0];
        const away = comp.competitors.find(t => t.homeAway === "away");
        const home = comp.competitors.find(t => t.homeAway === "home");

        segments.push(
          `${league.name}: ${away.team.abbreviation} ${away.score} – ${home.score} ${home.team.abbreviation} (${comp.status.type.shortDetail})`
        );
      });

    } catch (err) {
      console.error(league.name, err);
    }
  }

  document.getElementById("ticker").textContent =
    segments.length ? segments.join("   |   ") : "No games today.";
}

fetchScores();
setInterval(fetchScores, 90000);
</script>
</body>
</html>
